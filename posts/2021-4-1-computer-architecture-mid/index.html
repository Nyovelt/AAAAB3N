<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> CA1-MidTerm 梳理 | Canarypwn</title>
  <meta name="description" content="Hugo is a general-purpose website framework. Technically speaking, Hugo is a static site generator. Unlike systems that dynamically build a page with each visitor request, Hugo builds pages when you create or update your content. Since websites are viewed far more often than they are edited, Hugo is designed to provide an optimal viewing experience for your website’s end users and an ideal writing experience for website authors.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="CA1-MidTerm 梳理" />
<meta property="og:description" content="Intro CA 六大思想 1.Abstraction(Layers of Representation/Interpretation)
2.Moore’s Law (Designing through trends)
3.Principle of Locality (Memory Hierarchy)
4.Parallelism
5.Performance Measurement &amp; Improvement
6.Dependability via Redundancy
 其实原版的 CS61C在 21 spring 改成了五大思想(逃)  Numbers 整数   Everything in a computer is a number, in fact only 0 and 1.
  Integers are interpreted by adhering to fixed length
  Negative numbers are represented with Two’s complement
 Overflows can be detected utilizing the carry bit    整数分为 unsigned 和 signed, 对应原码和补码" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/posts/2021-4-1-computer-architecture-mid/" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="CA1-MidTerm 梳理"/>
<meta name="twitter:description" content="Intro CA 六大思想 1.Abstraction(Layers of Representation/Interpretation)
2.Moore’s Law (Designing through trends)
3.Principle of Locality (Memory Hierarchy)
4.Parallelism
5.Performance Measurement &amp; Improvement
6.Dependability via Redundancy
 其实原版的 CS61C在 21 spring 改成了五大思想(逃)  Numbers 整数   Everything in a computer is a number, in fact only 0 and 1.
  Integers are interpreted by adhering to fixed length
  Negative numbers are represented with Two’s complement
 Overflows can be detected utilizing the carry bit    整数分为 unsigned 和 signed, 对应原码和补码"/>

  
  
    
  
  
  <link rel="stylesheet" href="http://example.org/css/style-white.css">
  
   <link rel="stylesheet" href="http://example.org/css/custom.css"> 
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="http://example.org/images/favicon.ico" />

  
  
  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="https://who.aaaab3n.moe/">About</a></li>
         
        <li><a href="/posts">Posts</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/networks">Network</a></li>
         
        <li><a href="/notes">Notes</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li>
          <a class="icon" href="http://example.org/posts/2016-10-22-z/">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=http%3a%2f%2fexample.org%2fposts%2f2021-4-1-computer-architecture-mid%2f">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=http%3a%2f%2fexample.org%2fposts%2f2021-4-1-computer-architecture-mid%2f&text=CA1-MidTerm%20%e6%a2%b3%e7%90%86">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=http%3a%2f%2fexample.org%2fposts%2f2021-4-1-computer-architecture-mid%2f&title=CA1-MidTerm%20%e6%a2%b3%e7%90%86">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http%3a%2f%2fexample.org%2fposts%2f2021-4-1-computer-architecture-mid%2f&is_video=false&description=CA1-MidTerm%20%e6%a2%b3%e7%90%86">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=CA1-MidTerm%20%e6%a2%b3%e7%90%86&body=Check out this article: http%3a%2f%2fexample.org%2fposts%2f2021-4-1-computer-architecture-mid%2f">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=http%3a%2f%2fexample.org%2fposts%2f2021-4-1-computer-architecture-mid%2f&title=CA1-MidTerm%20%e6%a2%b3%e7%90%86">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=http%3a%2f%2fexample.org%2fposts%2f2021-4-1-computer-architecture-mid%2f&title=CA1-MidTerm%20%e6%a2%b3%e7%90%86">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=http%3a%2f%2fexample.org%2fposts%2f2021-4-1-computer-architecture-mid%2f&name=CA1-MidTerm%20%e6%a2%b3%e7%90%86&description=Intro%20CA%20%e5%85%ad%e5%a4%a7%e6%80%9d%e6%83%b3%201.Abstraction%28Layers%20of%20Representation%2fInterpretation%29%0a2.Moore%e2%80%99s%20Law%20%28Designing%20through%20trends%29%0a3.Principle%20of%20Locality%20%28Memory%20Hierarchy%29%0a4.Parallelism%0a5.Performance%20Measurement%20%26amp%3b%20Improvement%0a6.Dependability%20via%20Redundancy%0a%20%e5%85%b6%e5%ae%9e%e5%8e%9f%e7%89%88%e7%9a%84%20CS61C%e5%9c%a8%2021%20spring%20%e6%94%b9%e6%88%90%e4%ba%86%e4%ba%94%e5%a4%a7%e6%80%9d%e6%83%b3%28%e9%80%83%29%20%20Numbers%20%e6%95%b4%e6%95%b0%20%20%20Everything%20in%20a%20computer%20is%20a%20number%2c%20in%20fact%20only%200%20and%201.%0a%20%20Integers%20are%20interpreted%20by%20adhering%20to%20fixed%20length%0a%20%20Negative%20numbers%20are%20represented%20with%20Two%e2%80%99s%20complement%0a%20Overflows%20can%20be%20detected%20utilizing%20the%20carry%20bit%20%20%20%20%e6%95%b4%e6%95%b0%e5%88%86%e4%b8%ba%20unsigned%20%e5%92%8c%20signed%2c%20%e5%af%b9%e5%ba%94%e5%8e%9f%e7%a0%81%e5%92%8c%e8%a1%a5%e7%a0%81">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=http%3a%2f%2fexample.org%2fposts%2f2021-4-1-computer-architecture-mid%2f&t=CA1-MidTerm%20%e6%a2%b3%e7%90%86">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#intro">Intro</a>
      <ul>
        <li><a href="#ca-六大思想">CA 六大思想</a></li>
      </ul>
    </li>
    <li><a href="#numbers">Numbers</a>
      <ul>
        <li><a href="#整数">整数</a></li>
        <li><a href="#ieee-754---计算机数字标准表示">IEEE 754 - 计算机数字标准表示</a></li>
      </ul>
    </li>
    <li><a href="#c-simple">C Simple</a>
      <ul>
        <li><a href="#pointers">Pointers</a></li>
        <li><a href="#memory">Memory</a></li>
      </ul>
    </li>
    <li><a href="#risc-v">RISC-V</a>
      <ul>
        <li><a href="#instructions">Instructions</a></li>
        <li><a href="#immediates">Immediates</a></li>
        <li><a href="#little-eddiem">Little Eddiem</a></li>
        <li><a href="#types">Types</a></li>
        <li><a href="#ref">REF</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        CA1-MidTerm 梳理
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="0001-01-01 00:00:00 &#43;0000 UTC" itemprop="datePublished">0001-01-01</time>
          
        </div>
        
        
      </div>
    </header>

  
    <div class="content" itemprop="articleBody">
      <h2 id="intro">Intro</h2>
<h3 id="ca-六大思想">CA 六大思想</h3>
<p>1.Abstraction(Layers of Representation/Interpretation)</p>
<p>2.Moore’s Law (Designing through trends)</p>
<p>3.Principle of Locality (Memory Hierarchy)</p>
<p>4.Parallelism</p>
<p>5.Performance Measurement &amp; Improvement</p>
<p>6.Dependability via Redundancy</p>
<ul>
<li>其实原版的 <strong>CS61C</strong>在 21 spring 改成了五大思想(逃)</li>
</ul>
<h2 id="numbers">Numbers</h2>
<h3 id="整数">整数</h3>
<ul>
<li>
<p>Everything in a computer is a number, in fact only 0 and 1.</p>
</li>
<li>
<p>Integers are interpreted by adhering to fixed length</p>
</li>
<li>
<p>Negative numbers are represented with Two’s complement</p>
<ul>
<li>Overflows can be detected utilizing the carry bit</li>
</ul>
</li>
<li>
<p>整数分为 unsigned 和 signed, 对应原码和补码</p>
<ul>
<li>关于补码的运算和溢出:
<ul>
<li><img src="https://oss.aaaab3n.moe/uPic/Nr50nu.jpg" alt="Nr50nu"></li>
<li>Overflow ERROR: When the result of addition exceeds the range of $[-2^{n-1},2^{n-1}-1]$</li>
<li>Overflow occurs if and only if two numbers with <strong>the same sign</strong> are added and the result has the opposite sign.</li>
<li>Generally, 负数的二进制值要大于非负数(因为首位二进制为 1)</li>
<li><code>Unsigned</code> 对应 $2^n-1$</li>
<li>A <strong>neat trick</strong> for flipping the sign of a two’s complement number:  flip all thebits and add 1.</li>
</ul>
</li>
<li>2 problems (in 6-bit binary):
<ul>
<li><img src="https://oss.aaaab3n.moe/uPic/N9vNwe.jpg" alt="N9vNwe"></li>
</ul>
</li>
</ul>
</li>
<li>
<p>The decoding and encoding system are human-defined, so that it can represent any number as wished. That is, no largest interger represent by n-bit numbers</p>
</li>
<li>
<p>$\bar{x} + x + 1 = 0 $ because of <code>overflow</code></p>
</li>
<li>
<p><strong>n bit represents $2^n$ numbers in binary</strong></p>
</li>
<li>
<p>2 进制适合计算机, 10进制适合数手指, 16进制表达更方便</p>
</li>
<li>
<p>Consider <code>&gt;&gt;</code> operations, for signed int,  &raquo; 0 get signed bit; for neg get -1 (-1 &raquo; 1 = -1)</p>
</li>
<li>
<p>ref:</p>
</li>
</ul>
<ol>
<li><a href="https://stackoverflow.com/questions/29330787/signed-overflow-why-carry-in-and-carry-out-of-msb-should-match">About MSB and Overflow:	</a></li>
</ol>
<h3 id="ieee-754---计算机数字标准表示">IEEE 754 - 计算机数字标准表示</h3>
<ul>
<li>Bias: 偏移, 即在结果加上偏移指, 或者 0b0 代表了偏移值本身. e.g. 0 -&gt; -127,  0xFF = -127 + 0xFF = -127 + 255 = 128 (IEEE 754)</li>
<li>第一位为符号位S。 接下来八位为指数位E，剩下23位为分数位F (32 位)
<ul>
<li>$ (-1)^s \times (1+F) \times 2^E $</li>
</ul>
</li>
<li>大小比较：</li>
<li>首先按照指数排序， 再按照尾数排序</li>
<li>64位系统中: 1 位符号位， 11位指数位， 52位小数位 (double)</li>
<li>当指数位</li>
<li>Overflow:
<ul>
<li>在极大值的情况下会在指数位上溢出</li>
<li>在极小值的情况下会在指数位下溢出</li>
</ul>
</li>
<li>特殊情况：
<ul>
<li>指数位全0： 极小数</li>
<li>指数位全1, 小数位全0： Infinity 符号根据符号位确定</li>
<li>全0: 0 , 符号位不确定</li>
<li>$ \infin - \infin , 0-0 $:  可正可负，指数位全1， <strong>小数位不确定</strong> =&gt; NaN</li>
<li><img src="https://snz04pap002files.storage.live.com/y4m6TNxePdpVx9OzxurZtXVgs0-3fOLclDH0k7i6GFR3uBJmyk8ExJerz1sM9rEUi2gDGXBNU2NHWYYn7cmpsI04cntU594NFCKadeg1W7veTAX8Nrp8zBbop67NuExwcynOXvvd7VlJ-B1zwI3YedANrzaQK6GW0eWPzGDp22_UNnaiwo4neyy6yF2lyUlivRI?width=1074&amp;height=354&amp;cropmode=none" alt=""></li>
<li><img src="https://snz04pap002files.storage.live.com/y4m8LUJ7roIO6DfM8Bg74PzkjMI4rDQkW8wQUEOG86Ic1f9Zp3McDQKf7S3H_CwDY-h4dAeEJmNOOTr0QSF8xyLlBBCpB2eq0aawyEuDJ9ELdyJRghZMKfiISI-ozXtr9kkbT1D0rbjuCvGLv5-4ywitiilZbjrblsxFmp3dGvRdm6q2TqhQnoEJZX26KKcVHBk?width=1468&amp;height=400&amp;cropmode=none" alt=""></li>
</ul>
</li>
<li>浮点数不精确</li>
<li>NaN 不可比较 (仅仅在 NaN $\neq$ x 时成立)</li>
<li>Smallest Gap: $2^{-149} = 2^{-23}*2^{-126}$</li>
<li>运算无交换律</li>
<li>最大整数: 0b0 11111110 全1， 因为指数位全1的话会变成 inf</li>
<li>计算方法: e.g. 53.125 =? 110101.001 =&gt; $1.10101001 * 2^5$ =&gt; 127 + 5 = 132 = 10000100 =&gt; 0 10000100 10101001 000000..</li>
<li>加减法： <a href="https://www.youtube.com/watch?v=wC950FKNl8Y">https://www.youtube.com/watch?v=wC950FKNl8Y</a></li>
<li>ref
<ol>
<li><a href="https://www.h-schmidt.net/FloatConverter/IEEE754.html">IEEE 754 Simulator</a></li>
<li></li>
</ol>
</li>
</ul>
<h2 id="c-simple">C Simple</h2>
<h3 id="pointers">Pointers</h3>
<ul>
<li>Dangling references</li>
<li>memory leaks</li>
<li>C 是一个弱类型语言， 也就是说对于每一个类型，结构， 对于其边界没有严格的检查。对于指针也是这样， C将自由和信任交到了程序员手上， 因此会产生很多不安全的内存访问行为。
<ul>
<li>而 Rua st 则添加了诸多限制。</li>
</ul>
</li>
<li>函数指针：
<ul>
<li>char *foo(args)</li>
<li>f = &amp;foo
<ul>
<li>能被取地址</li>
</ul>
</li>
<li>(*f)(&ldquo;cat&rdquo;, 3)
<ul>
<li>能被调用， 返回 char*</li>
</ul>
</li>
</ul>
</li>
<li>Tricky:
<ul>
<li>int* a[10]; =&gt; a is an array of pointers</li>
<li>int *a, b; =&gt; a is pointer, b is integer</li>
</ul>
</li>
</ul>
<h3 id="memory">Memory</h3>
<ul>
<li>
<p>程序一共有四块内存区</p>
<ul>
<li>栈：存放局部变量
<ul>
<li>return address, arguments, local variables</li>
<li>Constants</li>
<li>see <a href="https://aaaab3n.moe/technology/2019/11/29/c-cpp-black-magic.html">编译时你在做什么？有没有空？可以来拯救吗？</a></li>
</ul>
</li>
<li>堆：存放动态变量 - difficult to manage
<ul>
<li>malloc</li>
<li>calloc</li>
<li>free</li>
<li>realloc</li>
<li></li>
</ul>
</li>
<li>静态：存放 functions 之外的变量
<ul>
<li>Static variables</li>
<li>Global variables</li>
<li>Constants</li>
<li>String Literals</li>
</ul>
</li>
<li>代码：当程序运行时存储，不可更改
<ul>
<li>Machine Instructions</li>
<li>Constants</li>
</ul>
</li>
<li><img src="https://snz04pap002files.storage.live.com/y4ms7978SdKAnRisT2pTi3Dt7K-57msUyxYmihpxd3Op6N3vVU322DnJGUOYX8xrL9gEoZe0CeXa8JK4O1wp3TbenlHKWoIBk1EW_AukWnx-hDhpUcdGxPZ5-mmaqwBGhpx1lV4dsgRKmhXNSuoMKAqnOphlOLlK4T5Yy-Q194wF6J9Nt284s9mLD1bfdaMg6Ek?width=784&amp;height=858&amp;cropmode=none" alt=""></li>
</ul>
</li>
<li>
<p>string:</p>
<ul>
<li><code>a = malloc(sizeof((char))* strlen(b)+1)</code>
<ul>
<li>pay attention to <strong>+1s</strong></li>
</ul>
</li>
<li><code>strcpy(a,b)</code> 不安全， 因为不知道结尾(\0)</li>
<li><code>strncpy(a,b, strlen(b)+1)</code>安全。  if its too short it will not copy the null terminator!</li>
</ul>
</li>
<li>
<p>Union</p>
<ul>
<li>
<p>hold different types in <strong>the same location</strong></p>
</li>
<li>
<p>也就是说会存在<strong>内存复写</strong></p>
</li>
<li>
<p>size为最大数据结构的大写， 对齐到 4k ， 例如 char 虽然是 1 字节， 但 union 会 size = 4</p>
</li>
<li>
<p><a href="https://www.geeksforgeeks.org/c-language-2-gq/structure-union-gq/">https://www.geeksforgeeks.org/c-language-2-gq/structure-union-gq/</a> Q8 is worth doing Q19 helps understanding</p>
</li>
<li>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">union</span> a{
    <span style="color:#66d9ef">char</span> b[<span style="color:#ae81ff">6</span>];
    <span style="color:#66d9ef">char</span> c[<span style="color:#ae81ff">9</span>];
} data;
    
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(){
    <span style="color:#75715e">// char d[7];
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">union</span> a A <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;abcdef&#34;</span>};
    strcpy(A.c, <span style="color:#e6db74">&#34;12345678&#34;</span>);
    printf(<span style="color:#e6db74">&#34;%s&#34;</span>, A.b);
}
    
</code></pre></div></li>
</ul>
<p>output is 12345678</p>
<pre><code>
- ```C
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
typedef union {
    unsigned long long num;
    struct {
        unsigned short a;
        unsigned short b;
        unsigned short c;
        unsigned short d;
    } data;
} Datatype;
  
int main(){
Datatype y;
y.num= 0xABCDDCBADCABAAAA;
printf(&quot;%d\n&quot;, y.data.a);
printf(&quot;%d\n&quot;, y.data.b);
printf(&quot;%d\n&quot;, y.data.c);
printf(&quot;%d\n&quot;, y.data.d);
}
  
// result is proved by gcc, clang, msvc on x86 devices
[Running]  gcc test.c -o test &amp;&amp; test
43690
56491
56506
43981
[Done] exited with code=0 in 1.206 seconds
  
&gt;&gt;&gt; 0xABCD
43981
&gt;&gt;&gt; 0xDCBA
56506
&gt;&gt;&gt; 0xDCAB
56491
&gt;&gt;&gt; 0xAAAA
43690
&gt;&gt;&gt;
  
</code></pre><ul>
<li>
<p>由此可见， 结构体中的类型是自上而下的，而小端序是先下后上的。于是产生了 x 反而对应末尾的2字节。</p>
</li>
<li>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">union</span> {
    <span style="color:#66d9ef">char</span> d[<span style="color:#ae81ff">4</span>];
    <span style="color:#66d9ef">int</span> e;
    <span style="color:#66d9ef">struct</span> {
        <span style="color:#66d9ef">char</span> a;
        <span style="color:#66d9ef">char</span> b;
        <span style="color:#66d9ef">char</span> c;
    } data;
} Datatype;
    
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(){
Datatype y;
strcpy(y.d, <span style="color:#e6db74">&#34;ABC&#34;</span>);
printf(<span style="color:#e6db74">&#34;%d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, y.e);
printf(<span style="color:#e6db74">&#34;%c</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, y.data.a);
printf(<span style="color:#e6db74">&#34;%c</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, y.data.b);
printf(<span style="color:#e6db74">&#34;%c</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, y.data.c);
}
    
Result:
    <span style="color:#ae81ff">4407873</span> <span style="color:#75715e">//0x434241
</span><span style="color:#75715e"></span>    A			
    B
    C
</code></pre></div><ul>
<li>char[] 类型或者数组类型也是自上而下的， 因此在内存中从上往下是 &lsquo;A&rsquo;, &lsquo;B&rsquo;, &lsquo;C&rsquo;。 int 按照小端序读是从下往上读，从左往右的拼接数字，所以是 &lsquo;\0'&lsquo;C'&lsquo;B'&lsquo;A&rsquo; = 0x00434241 = 4407873(D)</li>
</ul>
</li>
<li>
<p>如果感觉自己被加强了，可以试试 <a href="https://robotics.shanghaitech.edu.cn/courses/ca/20s/notes/midterm_sol.pdf">3(b)</a></p>
</li>
</ul>
</li>
</ul>
<h2 id="risc-v">RISC-V</h2>
<h3 id="instructions">Instructions</h3>
<ul>
<li>
<p><img src="https://snz04pap002files.storage.live.com/y4mwCiM1SDGRlQ1V0upPdLAAdT0SGq8eQbvbgdNV7RogPurxVjCRvqXCPaoUTJretOunNk8Ty6PlCZR18DdfV_1mi7woJi0WkqK0XVqcwZdCstrBc0UowRJ9Xwo2IMF8vMph-gaUcEXm3B8k1w0VcSYN6AYnVXcLhAXLMBdWy_qzpdM6qs7xJdkxzNk9Tut7SLz?width=1816&amp;height=534&amp;cropmode=none" alt=""></p>
</li>
<li>
<p>Techniques:</p>
<ul>
<li>*=-1: 取反加一</li>
<li>寄存器置零： xor zero</li>
</ul>
</li>
<li>
<p>函数调用</p>
<ul>
<li>a0 - a7: arguments</li>
<li>a0, a1: return value</li>
<li>sp: 栈指针</li>
<li>when jal to functions, a0-a7, t0-t6, ra need to save, since they can be modified during callee</li>
</ul>
</li>
<li>
<p><code>jr ra</code>: when some functions is called somewhere, in order to continue running programme, use jr ra to move to ra, and continue programme. 用于返回。 和 <code>jal</code>配合使用</p>
</li>
<li>
<p><code>jal</code>: jumo and link, 给 <code>ra</code>赋值， 这样函数就知道回到哪里了</p>
</li>
<li>
<p><code>j</code>: jal x0 offset 不记录返回值</p>
</li>
<li>
<p>伪指令</p>
<ul>
<li><img src="https://snz04pap002files.storage.live.com/y4mfcArPm5wbrtiaGxz8iuy9UamZmb45wPwZh9IrUV0iD4f1xZx3jar9u_1Rj64Xh68hYgnQAwjeC31ONDkCGZtvfYJvGS2csyyMCCcdHkPd5LUTfFAvWLPIiOp_lfsDr9sS29iE7_7DH_PS9l37yCp5vpRNFh9dkHq3CFEP9shv1Be1Vo3zMK3Y13EUD05ak4N?width=1920&amp;height=1440&amp;cropmode=none" alt=""></li>
</ul>
</li>
</ul>
<h3 id="immediates">Immediates</h3>
<ul>
<li>An I-type instruction can only have 12 bits of immediate
<ul>
<li>Bits 31:12 get the same value as Bit 11</li>
</ul>
</li>
<li>RISC-V immediates are &ldquo;sign extended&rdquo;
<ul>
<li>首位为符号位</li>
</ul>
</li>
</ul>
<h3 id="little-eddiem">Little Eddiem</h3>
<ul>
<li><img src="https://snz04pap002files.storage.live.com/y4mT2S6RrFDKQJmTzbD0r-zFNd4ybshNaFhCiNnpCpgDarK_egSY5EirDubpuId2ljjU4s4rSfQ7thLe7LW5FI86KIudWsqymgp_6coO0D4jCGkYnc6cUPBF0DratTKLlZ8UJV2LWBZJgt_QXby0mOCcC65TDrXzgpe1kni14q0dYHvpVDyKzwcXTkF2nRSYnR9?width=2098&amp;height=1184&amp;cropmode=none" alt="">
<ul>
<li>小端序： <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/ed/Little-Endian.svg/280px-Little-Endian.svg.png" alt=""></li>
<li>自下而上的存储， 前面的在下面。 寄存器从下而上数。</li>
<li>0x8f5 为负数(itype 指令只有12位， 因此大于 0x7ff 的都是负数)， 因此扩写成16位(因为寄存器为32位)的补码
<ul>
<li>0xfffff8f5 (两者取反 加一 值相同)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="types">Types</h3>
<p><img src="https://snz04pap002files.storage.live.com/y4m6bArYGFBiAHqyJvsp3OGJ_HLK-fgf4EJj5kOFUSGTWKBTkw0aQ6l-rkjdCHTfljQ430peJcBgMHS6i9BcNiWFyAlPFstoe5zNJV2jzYKJyNZH_IeyhxxUiAxyLuTEMgGdDiMYCPJ_Y63azFHjOv9oH_jPIlN9tcu5_b4x1PpZuBBMyXiEqjjdnmft_RCcrMr?width=1466&amp;height=408&amp;cropmode=none" alt=""></p>
<ul>
<li>
<p><code>I type </code>只能处理12 bit 立即数</p>
</li>
<li></li>
<li>
<p>LI = LUI + ADDI</p>
<ul>
<li><img src="https://snz04pap002files.storage.live.com/y4muP-145WsnADoJQkCOu408FSE_5yYyr0iryC-6wvNTJ7G3eZ8CthGBhm6IVdGRCuXZZrcKP4mepPgDQnpFnpEzAO8TvrEq6I4toAEjuMv0-tcjy2X7wF_fNKCqq-7togjeBqhZaOn8w6RS8mI_KZqXwKue9dV95mv__AWzFy4vyAt2oSKcT6FttPN-o-gGmhW?width=1770&amp;height=990&amp;cropmode=none" alt=""></li>
<li><img src="https://snz04pap002files.storage.live.com/y4mUTd2NJ5QIKRlWd0NtMbOYNirRqFBlLUndMQPTIi9_fqaDFlbgM7WiIeSKITRzqE1ecF22d0wQFSDZxhijaq8nfzNr6MRWbQQ_EVMwXt81b1SpQ_glRN6pfgCAdMo0ZQ9nM9_J5urBw7-dHTI7v-3gGKoj591FHQT_EEVcUBZ8H65UMy9wlxqNs3Et6XY-_En?width=1770&amp;height=1328&amp;cropmode=none" alt=""></li>
<li><strong>DEADBEEF</strong>: 如图所示，出现了问题。当且仅当32bit的后12bit为负数时，进行addi操作会扩展成补码。例如 <code>0xEFF</code>会扩展成<code>0xFFFFFEFF</code>。对于前20bit来说， 加上 <code>0xFFFFF000</code>无疑等于对第12位取反。</li>
<li>解决方法是， 当后三位大于 <code>0x7FF</code>的时候，对第12位+1， 或者是对<code>x10</code>+1。 因为第12位是对于16进制的剩余类，在这个剩余类中，<code>0+F=F, F+1=0</code>, 取反加1为自身。</li>
</ul>
</li>
</ul>
<h3 id="ref">REF</h3>
<p><a href="https://1drv.ms/b/s!Au3reWMu7K2ChOZfWdNGg9fNARrDAA?e=QDam4p">Risc-V instructions Set</a></p>

    </div>
  </article>

  
  





  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="https://who.aaaab3n.moe/">About</a></li>
         
          <li><a href="/posts">Posts</a></li>
         
          <li><a href="/tags">Tags</a></li>
         
          <li><a href="/networks">Network</a></li>
         
          <li><a href="/notes">Notes</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#intro">Intro</a>
      <ul>
        <li><a href="#ca-六大思想">CA 六大思想</a></li>
      </ul>
    </li>
    <li><a href="#numbers">Numbers</a>
      <ul>
        <li><a href="#整数">整数</a></li>
        <li><a href="#ieee-754---计算机数字标准表示">IEEE 754 - 计算机数字标准表示</a></li>
      </ul>
    </li>
    <li><a href="#c-simple">C Simple</a>
      <ul>
        <li><a href="#pointers">Pointers</a></li>
        <li><a href="#memory">Memory</a></li>
      </ul>
    </li>
    <li><a href="#risc-v">RISC-V</a>
      <ul>
        <li><a href="#instructions">Instructions</a></li>
        <li><a href="#immediates">Immediates</a></li>
        <li><a href="#little-eddiem">Little Eddiem</a></li>
        <li><a href="#types">Types</a></li>
        <li><a href="#ref">REF</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=http%3a%2f%2fexample.org%2fposts%2f2021-4-1-computer-architecture-mid%2f">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=http%3a%2f%2fexample.org%2fposts%2f2021-4-1-computer-architecture-mid%2f&text=CA1-MidTerm%20%e6%a2%b3%e7%90%86">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=http%3a%2f%2fexample.org%2fposts%2f2021-4-1-computer-architecture-mid%2f&title=CA1-MidTerm%20%e6%a2%b3%e7%90%86">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http%3a%2f%2fexample.org%2fposts%2f2021-4-1-computer-architecture-mid%2f&is_video=false&description=CA1-MidTerm%20%e6%a2%b3%e7%90%86">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=CA1-MidTerm%20%e6%a2%b3%e7%90%86&body=Check out this article: http%3a%2f%2fexample.org%2fposts%2f2021-4-1-computer-architecture-mid%2f">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=http%3a%2f%2fexample.org%2fposts%2f2021-4-1-computer-architecture-mid%2f&title=CA1-MidTerm%20%e6%a2%b3%e7%90%86">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=http%3a%2f%2fexample.org%2fposts%2f2021-4-1-computer-architecture-mid%2f&title=CA1-MidTerm%20%e6%a2%b3%e7%90%86">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=http%3a%2f%2fexample.org%2fposts%2f2021-4-1-computer-architecture-mid%2f&name=CA1-MidTerm%20%e6%a2%b3%e7%90%86&description=Intro%20CA%20%e5%85%ad%e5%a4%a7%e6%80%9d%e6%83%b3%201.Abstraction%28Layers%20of%20Representation%2fInterpretation%29%0a2.Moore%e2%80%99s%20Law%20%28Designing%20through%20trends%29%0a3.Principle%20of%20Locality%20%28Memory%20Hierarchy%29%0a4.Parallelism%0a5.Performance%20Measurement%20%26amp%3b%20Improvement%0a6.Dependability%20via%20Redundancy%0a%20%e5%85%b6%e5%ae%9e%e5%8e%9f%e7%89%88%e7%9a%84%20CS61C%e5%9c%a8%2021%20spring%20%e6%94%b9%e6%88%90%e4%ba%86%e4%ba%94%e5%a4%a7%e6%80%9d%e6%83%b3%28%e9%80%83%29%20%20Numbers%20%e6%95%b4%e6%95%b0%20%20%20Everything%20in%20a%20computer%20is%20a%20number%2c%20in%20fact%20only%200%20and%201.%0a%20%20Integers%20are%20interpreted%20by%20adhering%20to%20fixed%20length%0a%20%20Negative%20numbers%20are%20represented%20with%20Two%e2%80%99s%20complement%0a%20Overflows%20can%20be%20detected%20utilizing%20the%20carry%20bit%20%20%20%20%e6%95%b4%e6%95%b0%e5%88%86%e4%b8%ba%20unsigned%20%e5%92%8c%20signed%2c%20%e5%af%b9%e5%ba%94%e5%8e%9f%e7%a0%81%e5%92%8c%e8%a1%a5%e7%a0%81">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=http%3a%2f%2fexample.org%2fposts%2f2021-4-1-computer-architecture-mid%2f&t=CA1-MidTerm%20%e6%a2%b3%e7%90%86">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2021  Canarypwn 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="https://who.aaaab3n.moe/">About</a></li>
         
        <li><a href="/posts">Posts</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/networks">Network</a></li>
         
        <li><a href="/notes">Notes</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>


  


<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
    },
    svg: {
      fontCache: 'global'
    }
  };
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>

</html>
