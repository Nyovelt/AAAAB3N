<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>【yubikey】yubikey实用教程 | canarypwn</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="【yubikey】yubikey实用教程"><meta property="og:description" content="yubikey 实用教程 GPG 续签 导入 master private key gpg --import private.key 生成为期一年的各种 sub private key PS C:\Users\Nyove> gpg --expert --edit-key [data expunged] gpg (GnuPG) 2.3.6; Copyright (C) 2021 g10 Code GmbH This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law. Secret key is available. sec rsa4096/[data expunged] created: 2021-06-07 expires: never usage: C trust: unknown validity: unknown ssb ed25519/[data expunged] created: 2021-06-07 expired: 2022-06-07 usage: S card-no: 0006 16059699 ssb ed25519/[data expunged] created: 2021-06-07 expired: 2022-06-07 usage: A card-no: 0006 16059699 ssb cv25519/[data expunged] created: 2021-06-07 expired: 2022-06-07 usage: E card-no: 0006 16059699 [ unknown] (1)."><meta property="og:type" content="article"><meta property="og:url" content="https://aaaab3n.moe/posts/2021-7-29-yubikey/"><meta property="article:published_time" content="2021-07-29T10:02:59+08:00"><meta property="article:modified_time" content="2021-07-29T10:02:59+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="【yubikey】yubikey实用教程"><meta name=twitter:description content="yubikey 实用教程 GPG 续签 导入 master private key gpg --import private.key 生成为期一年的各种 sub private key PS C:\Users\Nyove> gpg --expert --edit-key [data expunged] gpg (GnuPG) 2.3.6; Copyright (C) 2021 g10 Code GmbH This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law. Secret key is available. sec rsa4096/[data expunged] created: 2021-06-07 expires: never usage: C trust: unknown validity: unknown ssb ed25519/[data expunged] created: 2021-06-07 expired: 2022-06-07 usage: S card-no: 0006 16059699 ssb ed25519/[data expunged] created: 2021-06-07 expired: 2022-06-07 usage: A card-no: 0006 16059699 ssb cv25519/[data expunged] created: 2021-06-07 expired: 2022-06-07 usage: E card-no: 0006 16059699 [ unknown] (1)."><link rel=stylesheet href=https://aaaab3n.moe/css/style-white.css><link href="http://fonts.loli.net/css?family=Roboto" rel=stylesheet type=text/css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://aaaab3n.moe/images/favicon.ico><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','G-73VZSQL8QT','auto');ga('send','pageview');}</script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a><a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a><a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast');" style=display:none><i class="fas fa-chevron-up fa-lg"></i></a><span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/tags>Tags</a></li><li><a href=/networks>Network</a></li><li><a href=/notes>Notes</a></li><li><a href=https://500px.com/p/nyovelt>Images</a></li><li><a href=/friends>Friends</a></li><li><a href=https://about.me/canarypwn>About</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://aaaab3n.moe/posts/2021-7-24-yaan-chengdu/><i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li><li><a class=icon href=https://aaaab3n.moe/posts/2021-7-29-hyperv-manjaro/><i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li><li><a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li><li><a class=icon href=#><i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2faaaab3n.moe%2fposts%2f2021-7-29-yubikey%2f"><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2faaaab3n.moe%2fposts%2f2021-7-29-yubikey%2f&text=%e3%80%90yubikey%e3%80%91yubikey%e5%ae%9e%e7%94%a8%e6%95%99%e7%a8%8b"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2faaaab3n.moe%2fposts%2f2021-7-29-yubikey%2f&title=%e3%80%90yubikey%e3%80%91yubikey%e5%ae%9e%e7%94%a8%e6%95%99%e7%a8%8b"><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2faaaab3n.moe%2fposts%2f2021-7-29-yubikey%2f&is_video=false&description=%e3%80%90yubikey%e3%80%91yubikey%e5%ae%9e%e7%94%a8%e6%95%99%e7%a8%8b"><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=%e3%80%90yubikey%e3%80%91yubikey%e5%ae%9e%e7%94%a8%e6%95%99%e7%a8%8b&body=Check out this article: https%3a%2f%2faaaab3n.moe%2fposts%2f2021-7-29-yubikey%2f"><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2faaaab3n.moe%2fposts%2f2021-7-29-yubikey%2f&title=%e3%80%90yubikey%e3%80%91yubikey%e5%ae%9e%e7%94%a8%e6%95%99%e7%a8%8b"><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2faaaab3n.moe%2fposts%2f2021-7-29-yubikey%2f&title=%e3%80%90yubikey%e3%80%91yubikey%e5%ae%9e%e7%94%a8%e6%95%99%e7%a8%8b"><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2faaaab3n.moe%2fposts%2f2021-7-29-yubikey%2f&name=%e3%80%90yubikey%e3%80%91yubikey%e5%ae%9e%e7%94%a8%e6%95%99%e7%a8%8b&description=yubikey%20%e5%ae%9e%e7%94%a8%e6%95%99%e7%a8%8b%20GPG%20%e7%bb%ad%e7%ad%be%20%e5%af%bc%e5%85%a5%20master%20private%20key%20gpg%20--import%20private.key%20%e7%94%9f%e6%88%90%e4%b8%ba%e6%9c%9f%e4%b8%80%e5%b9%b4%e7%9a%84%e5%90%84%e7%a7%8d%20sub%20private%20key%20PS%20C%3a%5cUsers%5cNyove%26gt%3b%20gpg%20--expert%20--edit-key%20%5bdata%20expunged%5d%20gpg%20%28GnuPG%29%202.3.6%3b%20Copyright%20%28C%29%202021%20g10%20Code%20GmbH%20This%20is%20free%20software%3a%20you%20are%20free%20to%20change%20and%20redistribute%20it.%20There%20is%20NO%20WARRANTY%2c%20to%20the%20extent%20permitted%20by%20law.%20Secret%20key%20is%20available.%20sec%20rsa4096%2f%5bdata%20expunged%5d%20created%3a%202021-06-07%20expires%3a%20never%20usage%3a%20C%20trust%3a%20unknown%20validity%3a%20unknown%20ssb%20ed25519%2f%5bdata%20expunged%5d%20created%3a%202021-06-07%20expired%3a%202022-06-07%20usage%3a%20S%20card-no%3a%200006%2016059699%20ssb%20ed25519%2f%5bdata%20expunged%5d%20created%3a%202021-06-07%20expired%3a%202022-06-07%20usage%3a%20A%20card-no%3a%200006%2016059699%20ssb%20cv25519%2f%5bdata%20expunged%5d%20created%3a%202021-06-07%20expired%3a%202022-06-07%20usage%3a%20E%20card-no%3a%200006%2016059699%20%5b%20unknown%5d%20%281%29."><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2faaaab3n.moe%2fposts%2f2021-7-29-yubikey%2f&t=%e3%80%90yubikey%e3%80%91yubikey%e5%ae%9e%e7%94%a8%e6%95%99%e7%a8%8b"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><a href=#gpg>GPG</a><ul><li><a href=#续签>续签</a></li></ul></li><li><a href=#gpg-signing-party>GPG Signing Party</a><ul><li><a href=#import-key>Import key</a></li><li><a href=#certify-key>Certify key</a></li><li><a href=#publish-key>Publish key</a></li></ul></li><li><a href=#reference>Reference</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">【yubikey】yubikey实用教程</h1><div class=meta><div class=postdate><time datetime="2021-07-29 10:02:59 +0800 +0800" itemprop=datePublished>2021-07-29</time></div></div></header><div class=content itemprop=articleBody><h1 id=yubikey-实用教程>yubikey 实用教程</h1><h2 id=gpg>GPG</h2><h3 id=续签>续签</h3><h4 id=导入-master-private-key>导入 master private key</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gpg --import private.key
</code></pre></div><h4 id=生成为期一年的各种-sub-private-key>生成为期一年的各种 sub private key</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>PS C:<span style=color:#ae81ff>\U</span>sers<span style=color:#ae81ff>\N</span>yove&gt; gpg --expert  --edit-key <span style=color:#f92672>[</span>data expunged<span style=color:#f92672>]</span>
gpg <span style=color:#f92672>(</span>GnuPG<span style=color:#f92672>)</span> 2.3.6; Copyright <span style=color:#f92672>(</span>C<span style=color:#f92672>)</span> <span style=color:#ae81ff>2021</span> g10 Code GmbH
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Secret key is available.

sec  rsa4096/<span style=color:#f92672>[</span>data expunged<span style=color:#f92672>]</span>
     created: 2021-06-07  expires: never       usage: C
     trust: unknown       validity: unknown
ssb  ed25519/<span style=color:#f92672>[</span>data expunged<span style=color:#f92672>]</span>
     created: 2021-06-07  expired: 2022-06-07  usage: S
     card-no: <span style=color:#ae81ff>0006</span> <span style=color:#ae81ff>16059699</span>
ssb  ed25519/<span style=color:#f92672>[</span>data expunged<span style=color:#f92672>]</span>
     created: 2021-06-07  expired: 2022-06-07  usage: A
     card-no: <span style=color:#ae81ff>0006</span> <span style=color:#ae81ff>16059699</span>
ssb  cv25519/<span style=color:#f92672>[</span>data expunged<span style=color:#f92672>]</span>
     created: 2021-06-07  expired: 2022-06-07  usage: E
     card-no: <span style=color:#ae81ff>0006</span> <span style=color:#ae81ff>16059699</span>
<span style=color:#f92672>[</span> unknown<span style=color:#f92672>]</span> <span style=color:#f92672>(</span>1<span style=color:#f92672>)</span>. Canarypwn <span style=color:#f92672>([</span>data expunged<span style=color:#f92672>])</span> &lt;nyovelt@outlook.com&gt;

gpg&gt; addkey
Please <span style=color:#66d9ef>select</span> what kind of key you want:
   <span style=color:#f92672>(</span>3<span style=color:#f92672>)</span> DSA <span style=color:#f92672>(</span>sign only<span style=color:#f92672>)</span>
   <span style=color:#f92672>(</span>4<span style=color:#f92672>)</span> RSA <span style=color:#f92672>(</span>sign only<span style=color:#f92672>)</span>
   <span style=color:#f92672>(</span>5<span style=color:#f92672>)</span> Elgamal <span style=color:#f92672>(</span>encrypt only<span style=color:#f92672>)</span>
   <span style=color:#f92672>(</span>6<span style=color:#f92672>)</span> RSA <span style=color:#f92672>(</span>encrypt only<span style=color:#f92672>)</span>
   <span style=color:#f92672>(</span>7<span style=color:#f92672>)</span> DSA <span style=color:#f92672>(</span>set your own capabilities<span style=color:#f92672>)</span>
   <span style=color:#f92672>(</span>8<span style=color:#f92672>)</span> RSA <span style=color:#f92672>(</span>set your own capabilities<span style=color:#f92672>)</span>
  <span style=color:#f92672>(</span>10<span style=color:#f92672>)</span> ECC <span style=color:#f92672>(</span>sign only<span style=color:#f92672>)</span>
  <span style=color:#f92672>(</span>11<span style=color:#f92672>)</span> ECC <span style=color:#f92672>(</span>set your own capabilities<span style=color:#f92672>)</span>
  <span style=color:#f92672>(</span>12<span style=color:#f92672>)</span> ECC <span style=color:#f92672>(</span>encrypt only<span style=color:#f92672>)</span>
  <span style=color:#f92672>(</span>13<span style=color:#f92672>)</span> Existing key
  <span style=color:#f92672>(</span>14<span style=color:#f92672>)</span> Existing key from card
Your selection? <span style=color:#ae81ff>10</span>
Please <span style=color:#66d9ef>select</span> which elliptic curve you want:
   <span style=color:#f92672>(</span>1<span style=color:#f92672>)</span> Curve <span style=color:#ae81ff>25519</span> *default*
   <span style=color:#f92672>(</span>2<span style=color:#f92672>)</span> Curve <span style=color:#ae81ff>448</span>
   <span style=color:#f92672>(</span>3<span style=color:#f92672>)</span> NIST P-256
   <span style=color:#f92672>(</span>4<span style=color:#f92672>)</span> NIST P-384
   <span style=color:#f92672>(</span>5<span style=color:#f92672>)</span> NIST P-521
   <span style=color:#f92672>(</span>6<span style=color:#f92672>)</span> Brainpool P-256
   <span style=color:#f92672>(</span>7<span style=color:#f92672>)</span> Brainpool P-384
   <span style=color:#f92672>(</span>8<span style=color:#f92672>)</span> Brainpool P-512
   <span style=color:#f92672>(</span>9<span style=color:#f92672>)</span> secp256k1
Your selection? <span style=color:#ae81ff>1</span>
Please specify how long the key should be valid.
         0 <span style=color:#f92672>=</span> key does not expire
      &lt;n&gt;  <span style=color:#f92672>=</span> key expires in n days
      &lt;n&gt;w <span style=color:#f92672>=</span> key expires in n weeks
      &lt;n&gt;m <span style=color:#f92672>=</span> key expires in n months
      &lt;n&gt;y <span style=color:#f92672>=</span> key expires in n years
Key is valid <span style=color:#66d9ef>for</span>? <span style=color:#f92672>(</span>0<span style=color:#f92672>)</span> 1y
Key expires at 6/19/2023 5:26:10 PM China Standard Time
Is this correct? <span style=color:#f92672>(</span>y/N<span style=color:#f92672>)</span> y
Really create? <span style=color:#f92672>(</span>y/N<span style=color:#f92672>)</span> y
gpg: AllowSetForegroundWindow<span style=color:#f92672>(</span>1516<span style=color:#f92672>)</span> failed: Access is denied.
We need to generate a lot of random bytes. It is a good idea to perform
some other action <span style=color:#f92672>(</span>type on the keyboard, move the mouse, utilize the
disks<span style=color:#f92672>)</span> during the prime generation; this gives the random number
generator a better chance to gain enough entropy.

sec  rsa4096/<span style=color:#f92672>[</span>data expunged<span style=color:#f92672>]</span>
     created: 2021-06-07  expires: never       usage: C
     trust: unknown       validity: unknown
ssb  ed25519/<span style=color:#f92672>[</span>data expunged<span style=color:#f92672>]</span>
     created: 2021-06-07  expired: 2022-06-07  usage: S
     card-no: <span style=color:#ae81ff>0006</span> <span style=color:#ae81ff>16059699</span>
ssb  ed25519/<span style=color:#f92672>[</span>data expunged<span style=color:#f92672>]</span>
     created: 2021-06-07  expired: 2022-06-07  usage: A
     card-no: <span style=color:#ae81ff>0006</span> <span style=color:#ae81ff>16059699</span>
ssb  cv25519/<span style=color:#f92672>[</span>data expunged<span style=color:#f92672>]</span>
     created: 2021-06-07  expired: 2022-06-07  usage: E
     card-no: <span style=color:#ae81ff>0006</span> <span style=color:#ae81ff>16059699</span>
ssb  ed25519/<span style=color:#f92672>[</span>data expunged<span style=color:#f92672>]</span>
     created: 2022-06-19  expires: 2023-06-19  usage: S
<span style=color:#f92672>[</span> unknown<span style=color:#f92672>]</span> <span style=color:#f92672>(</span>1<span style=color:#f92672>)</span>. Canarypwn <span style=color:#f92672>(</span>Alex Qin<span style=color:#f92672>)</span> &lt;nyovelt@outlook.com&gt;

gpg&gt; key <span style=color:#ae81ff>4</span> <span style=color:#75715e># 直到有选定的 key 有 * 号</span>

sec  rsa4096/<span style=color:#f92672>[</span>data expunged<span style=color:#f92672>]</span>
     created: 2021-06-07  expires: never       usage: C
     trust: unknown       validity: unknown
ssb  ed25519/<span style=color:#f92672>[</span>data expunged<span style=color:#f92672>]</span>
     created: 2021-06-07  expired: 2022-06-07  usage: S
     card-no: <span style=color:#ae81ff>0006</span> <span style=color:#ae81ff>16059699</span>
ssb  ed25519/<span style=color:#f92672>[</span>data expunged<span style=color:#f92672>]</span>
     created: 2021-06-07  expired: 2022-06-07  usage: A
     card-no: <span style=color:#ae81ff>0006</span> <span style=color:#ae81ff>16059699</span>
ssb  cv25519/<span style=color:#f92672>[</span>data expunged<span style=color:#f92672>]</span>
     created: 2021-06-07  expired: 2022-06-07  usage: E
     card-no: <span style=color:#ae81ff>0006</span> <span style=color:#ae81ff>16059699</span>
ssb* ed25519/<span style=color:#f92672>[</span>data expunged<span style=color:#f92672>]</span>
     created: 2022-06-19  expires: 2023-06-19  usage: S
<span style=color:#f92672>[</span> unknown<span style=color:#f92672>]</span> <span style=color:#f92672>(</span>1<span style=color:#f92672>)</span>. Canarypwn <span style=color:#f92672>([</span>data expunged<span style=color:#f92672>])</span> &lt;nyovelt@outlook.com&gt;

gpg&gt; keytocard
Please <span style=color:#66d9ef>select</span> where to store the key:
   <span style=color:#f92672>(</span>1<span style=color:#f92672>)</span> Signature key
   <span style=color:#f92672>(</span>3<span style=color:#f92672>)</span> Authentication key
Your selection? <span style=color:#ae81ff>1</span>
</code></pre></div><p>之后如法炮制，生成并转移 Signature, Encryption and Authentication.</p><p>经过 <code>gpg --card-edit</code> 检查确认无误</p><p>最后记得 <code>save</code></p><h4 id=续命>续命</h4><p>还是进入 edit key 界面, 逐一选中要虚名的 subkeys 然后 <code>expire</code> 之后 <code>save</code></p><h4 id=导出-public-key>导出 public key</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gpg --armor --export &lt;key&gt; &gt; public.key
</code></pre></div><p>并发布在 key server 上</p><h4 id=导出-private-key>导出 private key</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gpg --armor --export-secret-keys &lt;key&gt; &gt; private.key
</code></pre></div><h4 id=删除-subkey>删除 subkey</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gpg --delete-secret-key &lt;key&gt;
</code></pre></div><pre><code>
### Reset
#### Windows
</code></pre><p>PS C:\Program Files\Yubico\YubiKey Manager> ./ykman openpgp reset
WARNING! This will delete all stored OpenPGP keys and data and restore factory settings? [y/N]: y
Resetting OpenPGP data, don&rsquo;t remove the YubiKey&mldr;
Success! All data has been cleared and default PINs are set.
PIN: 123456
Reset code: NOT SET
Admin PIN: 12345678</p><pre><code>### Windows
#### Install GPG4Win
</code></pre><p>choco install gpg4win</p><pre><code>#### Import GPG public key from yubikey
```bash
gpg --card-edit
fetch # Get public key from your yubikey
</code></pre><h4 id=config-your-git>Config your Git</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git config --global user.signingkey &lt;key&gt;   <span style=color:#75715e># 配置 Git 签名</span>
git config commit.gpgsign true <span style=color:#75715e># 当前仓库签名 （strongly suggest）</span>
<span style=color:#75715e># or</span>
<span style=color:#75715e># git config --global commit.gpgsign true</span>
<span style=color:#75715e># git config commit.gpgsign false</span>
git config --global gpg.program <span style=color:#e6db74>&#34;&lt;InstallPath&gt;/GnuPG/bin/gpg.exe&#34;</span>
</code></pre></div><p>这里墙裂推荐单独在 git 文件夹下开启 <code>gpgsign</code> 不然就太脏了</p><h2 id=gpg-signing-party>GPG Signing Party</h2><h3 id=import-key>Import key</h3><ul><li><code>gpg --import &lt;key></code> # 导入 key，可以根据 finger print 从 keyserver 上拉</li></ul><h3 id=certify-key>Certify key</h3><ul><li><code>gpg --ask-cert-level --sign-key &lt;key></code> # 签名 key，可以选择签名级别</li></ul><p>注意，只有 Master Key 才有 [C]Certify 的权限，Sub Key 只有 [S]Sign 的权限，所以你需要取出 Master Key 的 private key 并导入到 GPG 中，或者直接在 Yubikey 中签名，如果你直接在 yubikey 中生成的 Master Key (勇)。</p><h3 id=publish-key>Publish key</h3><ul><li><code>gpg --keyserver 'hkps://keyserver.ubuntu.com' --send-keys &lt;key></code> # 发布 key 到 keyserver</li></ul><h2 id=reference>Reference</h2><ul><li><a href=https://www.liesauer.net/blog/post/sign-git-commit-with-gpg-under-windows.html>Windows下使用GPG对Git Commit进行签名</a></li><li><a href=https://support.yubico.com/hc/en-us/articles/360013790259-Using-Your-YubiKey-with-OpenPGP>Using Your YubiKey with OpenPGP</a></li></ul></div></article><div class=blog-post-comments><div id=disqus_thread><script type=text/javascript>(function(){var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;var disqus_shortname='canarypwn';dsq.src='//'+disqus_shortname+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/tags>Tags</a></li><li><a href=/networks>Network</a></li><li><a href=/notes>Notes</a></li><li><a href=https://500px.com/p/nyovelt>Images</a></li><li><a href=/friends>Friends</a></li><li><a href=https://about.me/canarypwn>About</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#gpg>GPG</a><ul><li><a href=#续签>续签</a></li></ul></li><li><a href=#gpg-signing-party>GPG Signing Party</a><ul><li><a href=#import-key>Import key</a></li><li><a href=#certify-key>Certify key</a></li><li><a href=#publish-key>Publish key</a></li></ul></li><li><a href=#reference>Reference</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2faaaab3n.moe%2fposts%2f2021-7-29-yubikey%2f"><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2faaaab3n.moe%2fposts%2f2021-7-29-yubikey%2f&text=%e3%80%90yubikey%e3%80%91yubikey%e5%ae%9e%e7%94%a8%e6%95%99%e7%a8%8b"><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2faaaab3n.moe%2fposts%2f2021-7-29-yubikey%2f&title=%e3%80%90yubikey%e3%80%91yubikey%e5%ae%9e%e7%94%a8%e6%95%99%e7%a8%8b"><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2faaaab3n.moe%2fposts%2f2021-7-29-yubikey%2f&is_video=false&description=%e3%80%90yubikey%e3%80%91yubikey%e5%ae%9e%e7%94%a8%e6%95%99%e7%a8%8b"><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=%e3%80%90yubikey%e3%80%91yubikey%e5%ae%9e%e7%94%a8%e6%95%99%e7%a8%8b&body=Check out this article: https%3a%2f%2faaaab3n.moe%2fposts%2f2021-7-29-yubikey%2f"><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2faaaab3n.moe%2fposts%2f2021-7-29-yubikey%2f&title=%e3%80%90yubikey%e3%80%91yubikey%e5%ae%9e%e7%94%a8%e6%95%99%e7%a8%8b"><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2faaaab3n.moe%2fposts%2f2021-7-29-yubikey%2f&title=%e3%80%90yubikey%e3%80%91yubikey%e5%ae%9e%e7%94%a8%e6%95%99%e7%a8%8b"><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2faaaab3n.moe%2fposts%2f2021-7-29-yubikey%2f&name=%e3%80%90yubikey%e3%80%91yubikey%e5%ae%9e%e7%94%a8%e6%95%99%e7%a8%8b&description=yubikey%20%e5%ae%9e%e7%94%a8%e6%95%99%e7%a8%8b%20GPG%20%e7%bb%ad%e7%ad%be%20%e5%af%bc%e5%85%a5%20master%20private%20key%20gpg%20--import%20private.key%20%e7%94%9f%e6%88%90%e4%b8%ba%e6%9c%9f%e4%b8%80%e5%b9%b4%e7%9a%84%e5%90%84%e7%a7%8d%20sub%20private%20key%20PS%20C%3a%5cUsers%5cNyove%26gt%3b%20gpg%20--expert%20--edit-key%20%5bdata%20expunged%5d%20gpg%20%28GnuPG%29%202.3.6%3b%20Copyright%20%28C%29%202021%20g10%20Code%20GmbH%20This%20is%20free%20software%3a%20you%20are%20free%20to%20change%20and%20redistribute%20it.%20There%20is%20NO%20WARRANTY%2c%20to%20the%20extent%20permitted%20by%20law.%20Secret%20key%20is%20available.%20sec%20rsa4096%2f%5bdata%20expunged%5d%20created%3a%202021-06-07%20expires%3a%20never%20usage%3a%20C%20trust%3a%20unknown%20validity%3a%20unknown%20ssb%20ed25519%2f%5bdata%20expunged%5d%20created%3a%202021-06-07%20expired%3a%202022-06-07%20usage%3a%20S%20card-no%3a%200006%2016059699%20ssb%20ed25519%2f%5bdata%20expunged%5d%20created%3a%202021-06-07%20expired%3a%202022-06-07%20usage%3a%20A%20card-no%3a%200006%2016059699%20ssb%20cv25519%2f%5bdata%20expunged%5d%20created%3a%202021-06-07%20expired%3a%202022-06-07%20usage%3a%20E%20card-no%3a%200006%2016059699%20%5b%20unknown%5d%20%281%29."><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2faaaab3n.moe%2fposts%2f2021-7-29-yubikey%2f&t=%e3%80%90yubikey%e3%80%91yubikey%e5%ae%9e%e7%94%a8%e6%95%99%e7%a8%8b"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu class=icon href=# onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden=true></i>Menu</a>
<a id=toc class=icon href=# onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden=true></i>TOC</a>
<a id=share class=icon href=# onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden=true></i>share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i>Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2023 canarypwn</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/tags>Tags</a></li><li><a href=/networks>Network</a></li><li><a href=/notes>Notes</a></li><li><a href=https://500px.com/p/nyovelt>Images</a></li><li><a href=/friends>Friends</a></li><li><a href=https://about.me/canarypwn>About</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script><script src=/js/main.js></script></html>